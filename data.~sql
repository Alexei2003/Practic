-- CLEAR
TRUNCATE TABLE STD_CHILD_AND_GROUP;
TRUNCATE TABLE STD_DAY;
TRUNCATE TABLE STD_EXEMPTION_AND_CHILD;
TRUNCATE TABLE STD_GENERAL_MONTH;
TRUNCATE TABLE STD_GROUP_AND_GROUP_TYPE;
TRUNCATE TABLE STD_PAYER_AND_CHILD;

TRUNCATE TABLE STD_RATE;
TRUNCATE TABLE STD_GROUP_TYPE;
TRUNCATE TABLE STD_GROUP;
TRUNCATE TABLE STD_CHILD;
TRUNCATE TABLE STD_EXEMPTION;
TRUNCATE TABLE STD_DAY_TYPE;
TRUNCATE TABLE STD_PAYER;

-- ADD DATA
-- DAY TYPE
INSERT INTO STD_DAY_TYPE (ID,TYPE)
VALUES(0,'Н');
INSERT INTO STD_DAY_TYPE (ID,TYPE)
VALUES(1,'Б');
INSERT INTO STD_DAY_TYPE (ID,TYPE)
VALUES(2,'В');

-- GROUP TYPE
INSERT INTO STD_GROUP_TYPE (ID,NAME,BEGIN_AGE,END_AGE)
VALUES(0,'ясли',2,3);
INSERT INTO STD_GROUP_TYPE (ID,NAME,BEGIN_AGE,END_AGE)
VALUES(1,'средняя',4,5);
INSERT INTO STD_GROUP_TYPE (ID,NAME,BEGIN_AGE,END_AGE)
VALUES(2,'старшая',6,6);

-- PRICE
INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (0,1,TO_DATE('26-08-2018', 'DD-MM-YYYY'),TO_DATE('14-05-2019', 'DD-MM-YYYY'));
INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (1,2,TO_DATE('26-08-2018', 'DD-MM-YYYY'),TO_DATE('14-05-2019', 'DD-MM-YYYY'));
INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (2,3,TO_DATE('26-08-2018', 'DD-MM-YYYY'),TO_DATE('14-05-2019', 'DD-MM-YYYY'));

INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (0,1.5,TO_DATE('14-05-2019', 'DD-MM-YYYY'),TO_DATE('31-12-2022', 'DD-MM-YYYY'));
INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (1,2.5,TO_DATE('14-05-2019', 'DD-MM-YYYY'),TO_DATE('31-12-2022', 'DD-MM-YYYY'));
INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (2,3.5,TO_DATE('14-05-2019', 'DD-MM-YYYY'),TO_DATE('31-12-2022', 'DD-MM-YYYY'));

INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (0,1.7,TO_DATE('31-12-2022', 'DD-MM-YYYY'),TO_DATE('06-06-2023', 'DD-MM-YYYY'));
INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (1,2.9,TO_DATE('31-12-2022', 'DD-MM-YYYY'),TO_DATE('06-06-2023', 'DD-MM-YYYY'));
INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (2,4.1,TO_DATE('31-12-2022', 'DD-MM-YYYY'),TO_DATE('06-06-2023', 'DD-MM-YYYY'));

INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (0,2,TO_DATE('06-06-2023', 'DD-MM-YYYY'),TO_DATE('02-02-2024', 'DD-MM-YYYY'));
INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (1,3.5,TO_DATE('06-06-2023', 'DD-MM-YYYY'),TO_DATE('02-02-2024', 'DD-MM-YYYY'));
INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (2,5,TO_DATE('06-06-2023', 'DD-MM-YYYY'),TO_DATE('02-02-2024', 'DD-MM-YYYY'));

INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (0,2.5,TO_DATE('02-02-2024', 'DD-MM-YYYY'),NULL);
INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (1,4,TO_DATE('02-02-2024', 'DD-MM-YYYY'),NULL);
INSERT INTO STD_RATE (GROUP_TYPE_ID, PRICE_DAY,BEGIN,END)
VALUES (2,7,TO_DATE('02-02-2024', 'DD-MM-YYYY'),NULL);

-- GROUP
INSERT INTO STD_GROUP (ID,NAME)
VALUES (0,'Группа №1');

INSERT INTO STD_GROUP (ID,NAME)
VALUES (1,'Группа №2');

INSERT INTO STD_GROUP (ID,NAME)
VALUES (2,'Группа №3');

-- PAYER
INSERT INTO STD_PAYER (ID,SURNAME,NAME,PATRONYMIC,TELEPHONE_NUMBER,EMAIL)
VALUES (0,'Афанасенко','Корней','Александрович','375248656156','kor@gmail.com');

INSERT INTO STD_PAYER (ID,SURNAME,NAME,PATRONYMIC,TELEPHONE_NUMBER,EMAIL)
VALUES (1,'Головчук','Илья',NULL,'375449872356','golovshyk@gmail.com');

INSERT INTO STD_PAYER (ID,SURNAME,NAME,PATRONYMIC,TELEPHONE_NUMBER,EMAIL)
VALUES (2,'Головчук','АНА',NULL,'375445572333','golovshykAna@gmail.com');

-- EXEMPTION
INSERT INTO STD_EXEMPTION (ID,NAME,DISCOUNT)
VALUES (0,'ЛЬГОТА 1', 0.1);

INSERT INTO STD_EXEMPTION (ID,NAME,DISCOUNT)
VALUES (1,'ЛЬГОТА 2', 0.3);

-- CHILD
INSERT INTO STD_CHILD (ID,SURNAME,NAME,PATRONYMIC,BIRTHDAY)
VALUES (0,'Афанасенко','Алексей','Корнеевич',TO_DATE('01-01-2019', 'DD-MM-YYYY'));

INSERT INTO STD_CHILD (ID,SURNAME,NAME,PATRONYMIC,BIRTHDAY)
VALUES (1,'Афанасенко','Александр','Корнеевич',TO_DATE('09-09-2020', 'DD-MM-YYYY'));

INSERT INTO STD_CHILD (ID,SURNAME,NAME,PATRONYMIC,BIRTHDAY)
VALUES (2,'Головчук','Егор',NULL,TO_DATE('13-05-2021', 'DD-MM-YYYY'));

INSERT INTO STD_CHILD (ID,SURNAME,NAME,PATRONYMIC,BIRTHDAY)
VALUES (3,'Головчук','Владислав',NULL,TO_DATE('14-07-2021', 'DD-MM-YYYY'));

-- GROUP AND GROUPTYPE
INSERT INTO STD_GROUP_AND_GROUP_TYPE (GROUP_ID,GROUP_TYPE_ID,BEGIN,END)
VALUES (0,0,TO_DATE('01-01-2021', 'DD-MM-YYYY'),TO_DATE('01-02-2023', 'DD-MM-YYYY'));

INSERT INTO STD_GROUP_AND_GROUP_TYPE (GROUP_ID,GROUP_TYPE_ID,BEGIN,END)
VALUES (0,1,TO_DATE('01-02-2023', 'DD-MM-YYYY'),NULL);

INSERT INTO STD_GROUP_AND_GROUP_TYPE (GROUP_ID,GROUP_TYPE_ID,BEGIN,END)
VALUES (1,0,TO_DATE('09-09-2022', 'DD-MM-YYYY'),NULL);

INSERT INTO STD_GROUP_AND_GROUP_TYPE (GROUP_ID,GROUP_TYPE_ID,BEGIN,END)
VALUES (2,0,TO_DATE('14-07-2023', 'DD-MM-YYYY'),NULL);

-- EXEMPTION AND CHILD
INSERT INTO STD_EXEMPTION_AND_CHILD (EXEMPTION_ID,CHILD_ID,BEGIN,END)
VALUES (0,1,TO_DATE('09-12-2021', 'DD-MM-YYYY'),TO_DATE('09-02-2022', 'DD-MM-YYYY'));

INSERT INTO STD_EXEMPTION_AND_CHILD (EXEMPTION_ID,CHILD_ID,BEGIN,END)
VALUES (1,2,TO_DATE('09-02-2022', 'DD-MM-YYYY'),TO_DATE('09-11-2022', 'DD-MM-YYYY'));

INSERT INTO STD_EXEMPTION_AND_CHILD (EXEMPTION_ID,CHILD_ID,BEGIN,END)
VALUES (0,3,TO_DATE('09-05-2023', 'DD-MM-YYYY'),TO_DATE('10-09-2023', 'DD-MM-YYYY'));

INSERT INTO STD_EXEMPTION_AND_CHILD (EXEMPTION_ID,CHILD_ID,BEGIN,END)
VALUES (1,3,TO_DATE('09-08-2023', 'DD-MM-YYYY'),TO_DATE('20-09-2023', 'DD-MM-YYYY'));

-- CHILD AND GROUP
INSERT INTO STD_CHILD_AND_GROUP (GROUP_ID,CHILD_ID,BEGIN,END)
VALUES (0,0,TO_DATE('01-01-2021', 'DD-MM-YYYY'),NULL);

INSERT INTO STD_CHILD_AND_GROUP (GROUP_ID,CHILD_ID,BEGIN,END)
VALUES (1,1,TO_DATE('09-09-2022', 'DD-MM-YYYY'),NULL);

INSERT INTO STD_CHILD_AND_GROUP (GROUP_ID,CHILD_ID,BEGIN,END)
VALUES (2,2,TO_DATE('14-07-2023', 'DD-MM-YYYY'),NULL);

INSERT INTO STD_CHILD_AND_GROUP (GROUP_ID,CHILD_ID,BEGIN,END)
VALUES (2,3,TO_DATE('14-07-2023', 'DD-MM-YYYY'),NULL);

-- PAYER AND CHILD
INSERT INTO STD_PAYER_AND_CHILD(PAYER_ID, CHILD_ID, BEGIN,END)
VALUES (0,0,TO_DATE('01-01-2021', 'DD-MM-YYYY'), NULL);

INSERT INTO STD_PAYER_AND_CHILD(PAYER_ID, CHILD_ID, BEGIN,END)
VALUES (0,1,TO_DATE('09-09-2022', 'DD-MM-YYYY'), NULL);

INSERT INTO STD_PAYER_AND_CHILD(PAYER_ID, CHILD_ID, BEGIN,END)
VALUES (1,2,TO_DATE('13-05-2023', 'DD-MM-YYYY'), TO_DATE('01-10-2023', 'DD-MM-YYYY'));

INSERT INTO STD_PAYER_AND_CHILD(PAYER_ID, CHILD_ID, BEGIN,END)
VALUES (1,3,TO_DATE('14-07-2023', 'DD-MM-YYYY'), TO_DATE('01-10-2023', 'DD-MM-YYYY'));

INSERT INTO STD_PAYER_AND_CHILD(PAYER_ID, CHILD_ID, BEGIN,END)
VALUES (2,2,TO_DATE('01-10-2023', 'DD-MM-YYYY'), NULL);

INSERT INTO STD_PAYER_AND_CHILD(PAYER_ID, CHILD_ID, BEGIN,END)
VALUES (2,3,TO_DATE('01-10-2023', 'DD-MM-YYYY'), NULL);

BEGIN
  STD_MARK_WEEKEND_DAY(TO_DATE('09-05-2023', 'DD-MM-YYYY'));
END;
/

BEGIN
  STD_MARK_WEEKEND_DAY_BETWEEN_DATES(TO_DATE('01-07-2022', 'DD-MM-YYYY'),TO_DATE('01-10-2022', 'DD-MM-YYYY'));
  STD_MARK_WEEKEND_DAY_BETWEEN_DATES(TO_DATE('01-09-2023', 'DD-MM-YYYY'),TO_DATE('01-10-2023', 'DD-MM-YYYY'));
END;
/

BEGIN
  STD_RANDOM_MARK_DAY_BETWEEN_DATES(TO_DATE('01-07-2022', 'DD-MM-YYYY'),TO_DATE('01-10-2022', 'DD-MM-YYYY'));
  STD_RANDOM_MARK_DAY_BETWEEN_DATES(TO_DATE('01-09-2023', 'DD-MM-YYYY'),TO_DATE('01-10-2023', 'DD-MM-YYYY'));
END;
/

BEGIN
  STD_CANCULATE_PRICE(TO_DATE('01-09-2023', 'DD-MM-YYYY'));
END;
/

-- SELECT *
SELECT * FROM STD_CHILD;
SELECT * FROM STD_CHILD_AND_GROUP;
SELECT * FROM STD_DAY;
SELECT * FROM STD_DAY_TYPE;
SELECT * FROM STD_EXEMPTION;
SELECT * FROM STD_EXEMPTION_AND_CHILD;
SELECT * FROM STD_GENERAL_MONTH;
SELECT * FROM STD_GROUP;
SELECT * FROM STD_GROUP_AND_GROUP_TYPE;
SELECT * FROM STD_GROUP_TYPE;
SELECT * FROM STD_PAYER;
SELECT * FROM STD_PAYER_AND_CHILD;
SELECT * FROM STD_RATE;

-- pivot - read
-- пакеты 
-- *сделать таблицу оперативных расчетов с разбивкой по тарифам 4дня 1цена 2дня другой тариф.
